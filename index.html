<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>複数検索エンジン同時検索</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }
        #search-container {
            width: 100%;
            max-width: 600px;
        }
        #search-box {
            width: 100%;
            height: 100px;
            font-size: 16px;
            padding: 10px;
            margin-bottom: 10px;
            box-sizing: border-box;
        }
        #search-button, #copy-button {
            width: 100%;
            padding: 10px;
            font-size: 16px;
            margin-bottom: 10px;
        }
        #engine-options {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        .engine-option {
            margin-bottom: 5px;
        }
        #message {
            color: red;
            margin-top: 10px;
        }
        #ai-links {
            margin-top: 20px;
        }
        #ai-links a {
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <div id="search-container">
        <textarea id="search-box" placeholder="検索キーワードを入力してください"></textarea>
        <button id="search-button">検索</button>
        <button id="copy-button">テキストをコピー</button>
        <div id="engine-options">
            <label class="engine-option">
                <input type="checkbox" id="google-check" checked>
                <a href="https://google.co.jp" target="_blank">Google</a>
            </label>
            <label class="engine-option">
                <input type="checkbox" id="perplexity-check" checked>
                <a href="https://www.perplexity.ai" target="_blank">Perplexity</a>
            </label>
            <label class="engine-option">
                <input type="checkbox" id="genspark-check" checked>
                <a href="https://www.genspark.ai" target="_blank">GenSpark</a>
            </label>
            <label class="engine-option">
                <input type="checkbox" id="yahoo-check">
                <a href="https://search.yahoo.co.jp" target="_blank">Yahoo</a>
            </label>
            <label class="engine-option">
                <input type="checkbox" id="amazon-check">
                <a href="https://www.amazon.co.jp/-/en/gp/css/homepage.html?ref_=nav_youraccount_btn&language=ja_JP" target="_blank">Amazon</a>
            </label>
        </div>
        <label>
            <input type="checkbox" id="enter-search" checked>
            エンターキーで検索
        </label>
        <div id="message"></div>
    </div>
    <div id="ai-links">
        <a href="https://gemini.google.com/app?hl=ja" target="_blank">Gemini</a>
        <a href="https://aistudio.google.com/app/prompts/new_chat" target="_blank">AI Studio</a>
        <a href="https://claude.ai/new" target="_blank">Claude</a>
        <a href="https://mapify.so/ja/app/new" target="_blank">Mapify</a>
    </div>

    <script>
        // 検索エンジンの設定
        const searchEngines = [
            { id: 'google-check', url: 'https://google.co.jp/search?q=%s' },
            { id: 'perplexity-check', url: 'https://www.perplexity.ai/search/new?q=%s' },
            { id: 'genspark-check', url: 'https://www.genspark.ai/search?query=%s' },
            { id: 'yahoo-check', url: 'https://search.yahoo.co.jp/search?p=%s' },
            { id: 'amazon-check', url: 'https://www.amazon.co.jp/s?k=%s' }
        ];

        // DOM要素の取得
        const searchBox = document.getElementById('search-box');
        const searchButton = document.getElementById('search-button');
        const copyButton = document.getElementById('copy-button');
        const messageDiv = document.getElementById('message');
        const enterSearch = document.getElementById('enter-search');

        // 検索関数
        function performSearch() {
            const query = encodeURIComponent(searchBox.value.trim());
            if (query === '') {
                messageDiv.textContent = '検索キーワードを入力してください。';
                return;
            }

            let openedWindows = 0;
            searchEngines.forEach((engine, index) => {
                if (document.getElementById(engine.id).checked) {
                    setTimeout(() => {
                        const newWindow = window.open(engine.url.replace('%s', query), '_blank');
                        if (newWindow) {
                            openedWindows++;
                        } else if (index === 0) {
                            messageDiv.textContent = 'ポップアップがブロックされました。検索を許可してください。';
                        }
                    }, index * 100);
                }
            });

            setTimeout(() => {
                if (openedWindows > 0) {
                    messageDiv.textContent = `${openedWindows}個の検索タブが開かれました。`;
                }
            }, searchEngines.length * 100);
        }

        // イベントリスナーの設定
        searchButton.addEventListener('click', performSearch);

        searchBox.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && !e.shiftKey && enterSearch.checked) {
                e.preventDefault();
                performSearch();
            }
        });

        copyButton.addEventListener('click', () => {
            searchBox.select();
            document.execCommand('copy');
            messageDiv.textContent = 'テキストがコピーされました。';
        });

        // ポップアップ許可メッセージ
        messageDiv.textContent = 'このページの使用では、ポップアップを許可してください。';
    </script>
</body>
</html>
